<div id="listModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:2000; justify-content:center; align-items:center;" onclick="closeModal()">
    <div style="background:white; padding:25px; border-radius:15px; width:95%; max-width:650px; position:relative; display: flex; flex-direction: column; max-height: 90vh;" onclick="event.stopPropagation()">
        <span onclick="closeModal()" style="position: absolute; right: 15px; top: 10px; cursor:pointer; font-size:28px; font-weight: bold; z-index: 10;">&times;</span>
        
        <div id="modalBody" style="overflow-y: auto; padding-right: 10px;"></div>
    </div>
</div>

<script src="collectives.js"></script>
<script src="cheruta.js"></script>
<script src="contest.js"></script>

<script>
    const AUTH_URL = "https://accounts.google.com/o/oauth2/v2/auth?client_id=734541752522-bqp7ljgjq27k8psn3pv6g3c3rcp16fhi.apps.googleusercontent.com&redirect_uri=https://n8n.narodocnt.online/webhook/google-signup&response_type=code&scope=openid%20email%20profile&prompt=consent";

    function handleAuthClick() {
        const user = localStorage.getItem('user');
        if (user) {
            if (confirm(`Вийти з аккаунту ${user}?`)) {
                localStorage.removeItem('user');
                location.reload();
            }
        } else {
            window.location.href = AUTH_URL;
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        const params = new URLSearchParams(window.location.search);
        const name = params.get('name');
        if (name) localStorage.setItem('user', decodeURIComponent(name));

        const user = localStorage.getItem('user');
        if (user) {
            const btn = document.getElementById('loginBtn');
            if (btn) {
                btn.innerText = user;
                btn.style.background = "#27ae60";
                btn.style.color = "white";
            }
        }
    });

    // Оновлена функція закриття (також дублюється в js файлі для надійності)
    function closeModal() { 
        document.getElementById('listModal').style.display = 'none'; 
        document.body.style.overflow = 'auto'; // Повертаємо прокрутку сайту
    }
</script>
</body>
</html>
